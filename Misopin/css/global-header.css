/* ========================================
   전역 통합 CSS 규칙 (Migration Plan 기반)
   생성일: 2025-09-06
   목적: 모든 CSS 충돌 제거 및 안정화
   ======================================== */

/* CSS 변수 정의 */
:root { 
  --header-height: 80px;
  --header-height-mobile: 60px;
  --section-padding: clamp(32px, 6vh, 72px);
  --brand-color: #333333;
  --ink-color: #697684;
  --bg-color: #F4F8FC;
}

/* ========================================
   Step 1: 헤더 안정화 - sticky로 변경하여 충돌 제거
   ======================================== */
#header, 
.header,
.header-area-2 {
  position: sticky !important;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: var(--header-height);
  z-index: 9999 !important;
  background: #fff !important;
  border-bottom: 1px solid #e5e5e5;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  will-change: transform;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ========================================
   Step 2: GSAP pin-spacer 충돌 완전 제거
   ======================================== */
body { 
  padding-top: 0 !important;
  margin: 0;
}

.pin-spacer { 
  height: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* pin이 꼭 필요한 섹션만 예외 허용 */
.section--keeps-pin + .pin-spacer { 
  height: auto !important; 
}

/* ========================================
   Step 3: 섹션 간격 전역 통일
   ======================================== */
.section, 
section, 
.bd_bg, 
.j_ttl_s, 
.section-padding,
[class*="section_"] {
  padding-top: var(--section-padding);
  padding-bottom: var(--section-padding);
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* 첫 번째 섹션은 헤더와 자연스럽게 연결 */
main > :first-child,
.main_screen,
#hero,
.hero-section {
  padding-top: 0 !important;
  margin-top: 0 !important;
}

/* ========================================
   Step 4: 네비게이션 레이아웃 안정화
   ======================================== */
.header-main,
.header_in {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box;
}

.menu_list {
  display: flex;
  gap: 40px;
  align-items: center;
  margin: 0;
  padding: 0;
  list-style: none;
}

.menu_list li {
  margin: 0;
  padding: 0;
  list-style: none;
}

.menu_list li a {
  color: var(--brand-color);
  font-size: 16px;
  font-weight: 500;
  text-decoration: none;
  white-space: nowrap;
  padding: 5px 0;
  transition: all 0.3s ease;
}

.menu_list li a:hover {
  color: #555;
  opacity: 0.8;
}

/* ========================================
   Step 5: 스크롤 시 헤더 변화
   ======================================== */
#header.scrolled,
.header.scrolled,
.header-area-2.scrolled {
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 4px 32px rgba(0, 0, 0, 0.12) !important;
  height: calc(var(--header-height) - 15px);
}

/* ========================================
   Step 6: 로고 영역
   ======================================== */
.logo,
.header .logo,
#header .logo {
  display: flex;
  align-items: center;
  height: 50px;
}

.logo img,
.header .logo img,
#header .logo img {
  height: 40px;
  width: auto;
  object-fit: contain;
  transition: height 0.3s ease;
}

.scrolled .logo img {
  height: 35px;
}

/* ========================================
   Step 7: 모바일 반응형
   ======================================== */
@media (max-width: 768px) {
  #header,
  .header,
  .header-area-2 {
    height: var(--header-height-mobile) !important;
  }
  
  #header.scrolled,
  .header.scrolled,
  .header-area-2.scrolled {
    height: 50px !important;
  }
  
  .logo img,
  .header .logo img,
  #header .logo img {
    height: 30px;
  }
  
  .scrolled .logo img {
    height: 25px;
  }
  
  /* 모바일 햄버거 메뉴 */
  .mobile-menu-toggle {
    display: block !important;
    width: 30px;
    height: 30px;
    cursor: pointer;
  }
  
  .menu_list {
    display: none;
  }
  
  .menu_list.mobile-active {
    display: flex;
    position: fixed;
    top: var(--header-height-mobile);
    left: 0;
    right: 0;
    background: white;
    flex-direction: column;
    padding: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    z-index: 9998;
  }
}

/* ========================================
   Step 8: 푸터 안정화
   ======================================== */
footer,
.footer {
  position: relative !important;
  margin-top: auto;
  background: var(--bg-color);
}

/* ========================================
   Step 9: 스크롤 진행률 바
   ======================================== */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  height: 3px;
  background: linear-gradient(90deg, #97b3d8 0%, #5a8dc7 100%);
  z-index: 10000;
  transition: width 0.1s linear;
  width: 0%;
}

/* ========================================
   Step 10: 성능 최적화 설정
   ======================================== */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

img {
  max-width: 100%;
  height: auto;
}

/* 애니메이션 성능 최적화 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}