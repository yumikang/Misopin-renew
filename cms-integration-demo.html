<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ì†Œí•€ì˜ì› CMS ì—°ë™ ë°ëª¨</title>

    <!-- CMS ì—°ë™ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="css/misopin-cms.css">

    <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ -->
    <style>
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: #007cba;
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section-title {
            color: #333;
            border-bottom: 2px solid #007cba;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .demo-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background: #005a8b;
        }

        .btn.secondary {
            background: #6c757d;
        }

        .btn.secondary:hover {
            background: #545b62;
        }

        .api-info {
            background: #f8f9fa;
            border-left: 4px solid #007cba;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 14px;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-online {
            background: #28a745;
        }

        .status-offline {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ¥ ë¯¸ì†Œí•€ì˜ì› CMS ì—°ë™ ë°ëª¨</h1>
        <p>ì •ì  ì‚¬ì´íŠ¸ì™€ CMSì˜ ì™„ë²½í•œ í†µí•©</p>
        <div id="connection-status">
            <span class="status-indicator status-offline"></span>
            CMS ì—°ê²° í™•ì¸ ì¤‘...
        </div>
    </header>

    <div class="container">
        <!-- API ì—°ê²° ìƒíƒœ ì„¹ì…˜ -->
        <div class="section">
            <h2 class="section-title">ğŸ”Œ CMS API ì—°ê²° ìƒíƒœ</h2>
            <div class="api-info">
                <strong>CMS ì„œë²„:</strong> http://localhost:3004<br>
                <strong>ê³µê°œ API:</strong> /api/public/*<br>
                <strong>ìºì‹œ:</strong> 5ë¶„ TTL
            </div>
            <div class="demo-buttons">
                <button class="btn" onclick="testConnection()">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                <button class="btn secondary" onclick="clearCache()">ìºì‹œ ì´ˆê¸°í™”</button>
            </div>
            <div id="api-status"></div>
        </div>

        <!-- ê³µì§€ì‚¬í•­ ì„¹ì…˜ -->
        <div class="section">
            <h2 class="section-title">ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
            <div class="demo-buttons">
                <button class="btn" onclick="loadNotices()">ê³µì§€ì‚¬í•­ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <button class="btn secondary" onclick="loadNotices(1)">í˜ì´ì§€ 1</button>
                <button class="btn secondary" onclick="loadNotices(2)">í˜ì´ì§€ 2</button>
            </div>
            <div id="notice-board"></div>
        </div>

        <!-- ì´ë²¤íŠ¸ ì„¹ì…˜ -->
        <div class="section">
            <h2 class="section-title">ğŸ‰ ì´ë²¤íŠ¸</h2>
            <div class="demo-buttons">
                <button class="btn" onclick="loadEvents()">ì´ë²¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <button class="btn secondary" onclick="loadEvents(1, 3)">ìµœê·¼ 3ê°œë§Œ</button>
            </div>
            <div id="event-board"></div>
        </div>

        <!-- ì „ì²´ ê²Œì‹œê¸€ ì„¹ì…˜ -->
        <div class="section">
            <h2 class="section-title">ğŸ“‹ ì „ì²´ ê²Œì‹œê¸€</h2>
            <div class="demo-buttons">
                <button class="btn" onclick="loadAllPosts()">ì „ì²´ ê²Œì‹œê¸€</button>
                <button class="btn secondary" onclick="showPopupDemo()">íŒì—… í…ŒìŠ¤íŠ¸</button>
            </div>
            <div id="all-posts"></div>
        </div>

        <!-- ì‚¬ìš©ë²• ì•ˆë‚´ -->
        <div class="section">
            <h2 class="section-title">ğŸ“– ì‚¬ìš©ë²• ì•ˆë‚´</h2>
            <h3>1. HTMLì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€</h3>
            <div class="api-info">
&lt;!-- CMS ì—°ë™ ìŠ¤íƒ€ì¼ --&gt;
&lt;link rel="stylesheet" href="css/misopin-cms.css"&gt;

&lt;!-- CMS ì—°ë™ ìŠ¤í¬ë¦½íŠ¸ --&gt;
&lt;script src="js/misopin-cms.js"&gt;&lt;/script&gt;
            </div>

            <h3>2. ê²Œì‹œíŒ ëª©ë¡ í‘œì‹œ</h3>
            <div class="api-info">
&lt;!-- HTML --&gt;
&lt;div id="notice-list"&gt;&lt;/div&gt;

&lt;script&gt;
// ê³µì§€ì‚¬í•­ ë¶ˆëŸ¬ì˜¤ê¸°
misopinCMS.renderBoardList('notice-list', {
    type: 'NOTICE',
    limit: 5
});

// ì´ë²¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
misopinCMS.renderBoardList('event-list', {
    type: 'EVENT',
    limit: 10
});
&lt;/script&gt;
            </div>

            <h3>3. ìˆ˜ë™ API í˜¸ì¶œ</h3>
            <div class="api-info">
// ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°
const posts = await misopinCMS.getBoardPosts({type: 'NOTICE'});

// íŠ¹ì • í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°
const page = await misopinCMS.getPage('about');

// í™œì„± íŒì—… ê°€ì ¸ì˜¤ê¸°
const popups = await misopinCMS.getActivePopups();
            </div>

            <h3>4. ìë™ íŒì—… í‘œì‹œ</h3>
            <p>í˜ì´ì§€ ë¡œë“œ ì‹œ CMSì—ì„œ ì„¤ì •í•œ íŒì—…ì´ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ "ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°"ë¥¼ ì„ íƒí•˜ë©´ 24ì‹œê°„ ë™ì•ˆ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <!-- CMS ì—°ë™ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="js/misopin-cms.js"></script>

    <script>
        // ì—°ê²° ìƒíƒœ í™•ì¸
        async function testConnection() {
            const statusDiv = document.getElementById('connection-status');
            const apiStatusDiv = document.getElementById('api-status');

            try {
                statusDiv.innerHTML = '<span class="status-indicator status-offline"></span>ì—°ê²° í™•ì¸ ì¤‘...';

                const response = await fetch('http://localhost:3004/api/public/pages');
                if (response.ok) {
                    statusDiv.innerHTML = '<span class="status-indicator status-online"></span>CMS ì—°ê²°ë¨';
                    apiStatusDiv.innerHTML = '<div style="color: green; margin-top: 10px;">âœ… API ì—°ê²° ì„±ê³µ</div>';
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                statusDiv.innerHTML = '<span class="status-indicator status-offline"></span>CMS ì—°ê²° ì‹¤íŒ¨';
                apiStatusDiv.innerHTML = `<div style="color: red; margin-top: 10px;">âŒ ì—°ê²° ì‹¤íŒ¨: ${error.message}</div>`;
            }
        }

        // ìºì‹œ ì´ˆê¸°í™”
        function clearCache() {
            misopinCMS.cache.clear();
            alert('ìºì‹œê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ê³µì§€ì‚¬í•­ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadNotices(page = 1) {
            misopinCMS.renderBoardList('notice-board', {
                type: 'NOTICE',
                limit: 5,
                page: page
            });
        }

        // ì´ë²¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadEvents(page = 1, limit = 5) {
            misopinCMS.renderBoardList('event-board', {
                type: 'EVENT',
                limit: limit,
                page: page
            });
        }

        // ì „ì²´ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadAllPosts() {
            misopinCMS.renderBoardList('all-posts', {
                limit: 10,
                page: 1
            });
        }

        // íŒì—… í…ŒìŠ¤íŠ¸
        function showPopupDemo() {
            misopinCMS.showPopups();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì—°ê²° í…ŒìŠ¤íŠ¸
        window.addEventListener('load', () => {
            setTimeout(testConnection, 1000);
        });
    </script>
</body>
</html>